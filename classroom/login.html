<!-- page de garde -->
<!-- <div id="notif-div"></div> -->
<div id="home-container">
    <div class="text-center d-flex flex-column justify-content-center jumbotron-neutral">
        <div id="interactive-elements-container" style="flex-grow:1;">
            <div id="fake-blockly">
                <span id="fake-blockly-desc" data-i18n="classroom.login.display">afficher</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="200" viewBox="0 0 191.9 55.4">
                    <g id="fake-blockly-svg">
                        <path
                            d="M31.8 55.4h-8.9a5.46 5.46 0 01-3.8-1.6L16 50.7a4.57 4.57 0 00-3.1-1.3H5.4A5.38 5.38 0 010 44V6.8a5.38 5.38 0 015.4-5.4h7.1a5.43 5.43 0 013.6 1.4l3.8 3.5a4.62 4.62 0 003 1.1h10.2a4.4 4.4 0 003.5-1.7L39 2.6A5.4 5.4 0 0143.2.5L186.5 0a5.38 5.38 0 015.4 5.4v37.7a5.38 5.38 0 01-5.4 5.4l-143.7-.1a4.82 4.82 0 00-3.2 1.3l-3.9 4a5.22 5.22 0 01-3.9 1.7zM5.3 2.4A4.44 4.44 0 00.9 6.8V44a4.44 4.44 0 004.4 4.4h7.5a5.46 5.46 0 013.8 1.6l3.1 3.1a4.57 4.57 0 003.1 1.3h8.9a4.82 4.82 0 003.2-1.3l3.9-4a5.52 5.52 0 013.9-1.6l143.7.1a4.44 4.44 0 004.4-4.4V5.5a4.44 4.44 0 00-4.4-4.4l-143.3.5a4.4 4.4 0 00-3.5 1.7l-2.4 3.1a5.45 5.45 0 01-4.3 2.1H22.7a5.43 5.43 0 01-3.6-1.4l-3.8-3.5a4.62 4.62 0 00-3-1.1l-7-.1z"
                            fill="#24a069" />
                        <path
                            d="M185.9 23.9a16.35 16.35 0 00-16.4-16.4H79.3a16.35 16.35 0 00-16.4 16.4v.2a16.35 16.35 0 0016.4 16.4h90.2a16.35 16.35 0 0016.4-16.4v-.2zm-27 11.6a2 2 0 01-2 2h-65a2 2 0 01-2-2v-22a2 2 0 012-2h65a2 2 0 012 2z"
                            fill="#e6e6e6" />
                        <path fill="#fff" class="cls-3"
                            d="M76.9 23a1.9 1.9 0 01.8 1.5 2.27 2.27 0 01-.6 1.6 2.17 2.17 0 01-3 0 1.82 1.82 0 01-.6-1.4 2.72 2.72 0 01.6-1.7l1.8-2.6H78L76.9 23zm6 0a1.9 1.9 0 01.8 1.5 2.27 2.27 0 01-.6 1.6 2.17 2.17 0 01-3 0 1.82 1.82 0 01-.6-1.4 2.72 2.72 0 01.6-1.7l1.8-2.6H84L82.9 23zM173.9 24.1a1.9 1.9 0 01-.8-1.5 2.11 2.11 0 01.6-1.6 2.17 2.17 0 013 0 1.82 1.82 0 01.6 1.4 2.72 2.72 0 01-.6 1.7l-1.8 2.6h-2.1zm-6 0a1.9 1.9 0 01-.8-1.5 2.11 2.11 0 01.6-1.6 2.17 2.17 0 013 0 1.82 1.82 0 01.6 1.4 2.72 2.72 0 01-.6 1.7l-1.8 2.6h-2.1z" />
                    </g>
                </svg>
                                 <label for="fake-blockly-input" class="sr-only">Texte à afficher dans l'exemple de code</label>
                 <input type="text" id="fake-blockly-input" name="name" maxlength="20"
                     data-i18n="[value]classroom.login.hello" autocomplete="off" data-lpignore="true" 
                     aria-label="Texte à afficher dans l'exemple de code">
            </div>
            <span id="fake-code"><span style="color: #AC00B1;">print</span><span>(</span><span id="fake-code-text"
                    style="color:#009651;" data-i18n="classroom.login.hello"></span><span>)</span></span>
            <span id="fake-display" data-i18n="classroom.login.hello"></span>
        </div>
        <div id="heading-container" style="flex-grow:1;">
            <h1 data-i18n="[html]classroom.login.neutralTitle" role="heading" aria-level="1"></h1>
            <span class="sub-text" data-i18n="classroom.login.subtitle"></span>
        </div>

        <div id="open-login-menu" style="flex-grow:2;">
                         <button class="btn btn-lg c-btn-primary" id="home-connexion" aria-label="Ouvrir le menu de connexion">
                 <span data-i18n="classroom.login.login"></span>
                 <i class="fas fa-chevron-right" aria-hidden="true"></i>
             </button>
        </div>

    </div>
    <div class="container">
        <div id="classroom-flow" class="row py-5 justify-content-md-center">
            <div class="col-sm col-lg-3 text-center">
                                 <img class="img-fluid" src="assets/media/create_activities.png" alt="Icône représentant la création d'activités">
                 <p data-i18n="[html]classroom.login.activities"></p>
             </div>
             <div class="col-sm col-lg-3 text-center">
                 <img class="img-fluid" src="assets/media/assign_activities.png" alt="Icône représentant l'assignation d'activités">
                 <p data-i18n="[html]classroom.login.attribute"></p>
             </div>
             <div class="col-sm col-lg-3 text-center">
                 <img class="img-fluid" src="assets/media/visualise_activities.png" alt="Icône représentant la visualisation des activités">
                 <p data-i18n="[html]classroom.login.visualize"></p>
            </div>
        </div>
    </div>

    <div id="classroom-faq">
        <div class="container py-5 mb-3">
            <h2 data-i18n="faqInfo.title" role="heading" aria-level="2"></h2>
        </div>
    </div>
</div>


<!-- page de login à choix multiple -->
  <div id="classroom-login-container" style="display:none;" role="dialog" aria-labelledby="login-choice-title" aria-modal="true">
     <div class="inner-login-container">
         <h2 id="login-choice-title" class="sr-only" role="heading" aria-level="2">Choix du type de connexion</h2>
         
         <div id="classroom-login-code" class="container-border-left" role="region" aria-labelledby="student-login-title">
             <h3 id="student-login-title" class="font-weight-bold c-text-secondary" data-i18n="classroom.login.student" role="heading" aria-level="3">Connexion élève</h3>
             <form aria-labelledby="student-login-title">
                 <div class="c-secondary-form mb-3">
                  <div class="d-flex flex-column">
                    <label for="class-code" data-i18n="classroom.login.codeInput">Code d'accès</label>
                    <input type="text" placeholder="123ABC" name="secret_code" id="class-code" autocomplete="off"
                        required aria-required="true" aria-describedby="class-code-help">
                    <div id="class-code-help" class="sr-only">Saisissez le code fourni par votre enseignant</div>
                  </div>
                 </div>
                 <button class="btn c-btn-secondary text-capitalize" id="class-connexion" type="submit" aria-label="Se connecter avec le code élève">
                     <span data-i18n="words.confirm">Confirmer</span>
                     <i class="fas fa-chevron-right" aria-hidden="true"></i>
                 </button>
             </form>
        </div>
                 <div id="classroom-login-vittascience-account" class="container-border-center" role="region" aria-labelledby="teacher-login-title">
             <h3 id="teacher-login-title" class="font-weight-bold c-text-primary" data-i18n="classroom.login.teacher" role="heading" aria-level="3">Connexion enseignant</h3>
             <p data-i18n="classroom.login.hasAccount">Vous avez déjà un compte ?</p>
             <button id="login-vittascience" class="btn c-btn-primary" type="button" aria-label="Ouvrir le formulaire de connexion enseignant">
                 <span data-i18n="classroom.login.login">Connexion</span> 
                 <i class="fas fa-chevron-down" aria-hidden="true"></i>
             </button>
             <button class="btn c-btn-primary mt-3" id="register-link" type="button" aria-label="Ouvrir le formulaire d'inscription">
                 <span data-i18n="classroom.login.registerLink">Créer un compte</span>
                 <i class="fas fa-chevron-down" aria-hidden="true"></i>
             </button>
         </div>
             <div id="classroom-login-gar" class="container-border-right" role="region" aria-labelledby="gar-title">
             <h4 id="gar-title" class="gar-presentation-text my-3" data-i18n="[html]classroom.login.gar" role="heading" aria-level="4">Connexion via GAR</h4>
             <a class="d-flex btn-sso fw-bold" href="./gar.php" aria-label="Se connecter via le Gestionnaire d'Accès aux Ressources">
                 <img src="./auth/svg/gar.svg" alt="Logo du Gestionnaire d'Accès aux Ressources" class="w-auto">
                 <span data-i18n="sso.gar">Demander un accès GAR</span>
             </a>
             
             <div id="sso-buttons-container" class="d-flex justify-content-center flex-wrap w-100" role="group" aria-label="Boutons de connexion sociale"></div>
         </div>
         <button onclick="navigateLight('', 1)" class="btn close-login-classroom m-1" type="button" aria-label="Fermer le formulaire de connexion" tabindex="0">
             <i class="fas fa-times" aria-hidden="true"></i>
         </button>
    </div>
</div>


<!-- Register page -->
 <div id="classroom-register-container" style="display:none;" role="dialog" aria-labelledby="register-title" aria-modal="true">
     <div class="inner-register-container">
         <form action="#" id="create-teacher-account-form" aria-labelledby="register-title" novalidate>
            <div class="form-group part-content-index part-row c-primary-form row mx-0" style="--bs-gutter-x: 2.5rem;">

                <div class="col-md-12">
                                         <h2 id="register-title" class="text-center fs-4 fw-bold c-text-primary" role="heading" aria-level="2">
                         <i class="fas fa-user-plus me-1 registration-icon" aria-hidden="true"></i>
                         <span class="font-weight-bold text-center mb-4 text-uppercase"
                             data-i18n="manager.account.registration.title">Création de compte</span>
                     </h2>
                    <p class="mb-1" data-i18n="manager.account.registration.description"></p>
                    <p data-i18n="[html]manager.account.registration.mandatory"></p>
                </div>

                <div class="col-md-6">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-user" aria-hidden="true"></i>
                             <label for="profile-form-first-name" class="tutorial-label" data-i18n="[html]manager.profil.firstname">Prénom <span class="mandatory" aria-label="obligatoire">*</span></label>
                         </span>
                         <input type="text" name="first-name" id="profile-form-first-name" class="form-control form-control-lg" required aria-required="true" aria-describedby="first-name-error">
                         <div id="first-name-error" class="error-message" aria-live="polite"></div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-user" aria-hidden="true"></i>
                             <label for="profile-form-last-name" class="tutorial-label" data-i18n="[html]manager.profil.lastname">Nom <span class="mandatory" aria-label="obligatoire">*</span></label>
                         </span>
                         <input type="text" name="last-name" id="profile-form-last-name" class="form-control form-control-lg" required aria-required="true" aria-describedby="last-name-error">
                         <div id="last-name-error" class="error-message" aria-live="polite"></div>
                    </div>
                </div>

                <div class="col-md-12">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-at" aria-hidden="true"></i>
                             <label for="profile-form-email" class="tutorial-label" data-i18n="[html]manager.profil.email">Email <span class="mandatory" aria-label="obligatoire">*</span></label>
                         </span>
                         <input type="email" name="email" id="profile-form-email" class="form-control form-control-lg" required aria-required="true" aria-describedby="email-error">
                         <div id="email-error" class="error-message" aria-live="polite"></div>
                    </div>
                </div>

                <div class="col-md-6" id="registration_pseudo">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-user" aria-hidden="true"></i>
                             <label for="profile-form-pseudo" class="tutorial-label" data-i18n="[html]manager.profil.nickname">Pseudonyme</label>
                         </span>
                         <input type="text" name="pseudo" id="profile-form-pseudo" class="form-control form-control-lg" aria-describedby="pseudo-help">
                         <div id="pseudo-help" class="form-text">Votre identifiant unique sur la plateforme (optionnel)</div>
                    </div>
                </div>

                <div class="col-md-6" id="registration_phone">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-phone" aria-hidden="true"></i>
                             <label for="profile-form-phone" class="tutorial-label" data-i18n="manager.profil.phone">Téléphone</label>
                         </span>
                         <input type="tel" name="phone-number" class="form-control form-control-lg" id="profile-form-phone" aria-describedby="phone-help">
                         <div id="phone-help" class="form-text">Format : +33 1 23 45 67 89 (optionnel)</div>
                    </div>
                </div>

                <div class="col-md-12" id="registration_bio">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-info-circle" aria-hidden="true"></i>
                             <label for="profile-form-bio" class="tutorial-label" data-i18n="[html]manager.profil.bio">Biographie</label>
                         </span>
                         <textarea class="form-control form-control-lg" name="mini-bio" id="profile-form-bio" rows="3" aria-describedby="bio-help"></textarea>
                         <div id="bio-help" class="form-text">Décrivez-vous brièvement (optionnel)</div>
                    </div>
                </div>

                <div class="col-md-12" id="registration_school">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-school" aria-hidden="true"></i>
                             <label for="profile-form-school" class="tutorial-label"
                                 data-i18n="[html]manager.profil.school">Établissement</label>
                         </span>
                         <input type="text" class="form-control form-control-lg" name="school" id="profile-form-school" aria-describedby="school-help">
                         <div id="school-help" class="form-text">Nom de votre établissement scolaire (optionnel)</div>
                    </div>
                </div>

                <div class="col-md-6" id="registration_grade">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-graduation-cap" aria-hidden="true"></i>
                             <label for="profile-form-grade" class="tutorial-label"
                                 data-i18n="[html]manager.profil.grade">Niveau d'enseignement <span class="mandatory" aria-label="obligatoire">*</span></label>
                         </span>
                         <select class="form-control form-control-lg" id="profile-form-grade" name="grade"
                             style="height:calc(2.875rem + 2px);" required aria-required="true" aria-describedby="grade-error">
                            <option selected value="0" data-i18n="manager.users.teacherGrades.0">Primaire</option>
                            <option value="1" data-i18n="manager.users.teacherGrades.1">Collège</option>
                            <option value="2" data-i18n="manager.users.teacherGrades.2">Lycée</option>
                            <option value="3" data-i18n="manager.users.teacherGrades.3">Lycée professionel</option>
                                                         <option value="4" data-i18n="manager.users.teacherGrades.4">POST-BAC</option>
                         </select>
                         <div id="grade-error" class="error-message" aria-live="polite"></div>
                    </div>
                </div>

                <div class="col-md-6" id="registration_subject">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-book" aria-hidden="true"></i>
                             <label for="profile-form-subject" class="tutorial-label"
                                 data-i18n="[html]manager.profil.subject">Matière <span class="mandatory" aria-label="obligatoire">*</span></label>
                         </span>
                         <select class="form-control form-control-lg" id="profile-form-subject" name="subject"
                             style="height:calc(2.875rem + 2px);" required aria-required="true" aria-describedby="subject-error">
                         </select>
                         <div id="subject-error" class="error-message" aria-live="polite"></div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-key" aria-hidden="true"></i>
                             <label for="profile-form-password" class="tutorial-label" data-i18n="[html]manager.profil.password">Mot de passe <span class="mandatory" aria-label="obligatoire">*</span></label>
                         </span>
                         <div class="input-group px-0">
                             <input type="password" name="password" id="profile-form-password" class="form-control form-control-lg" required aria-required="true" aria-describedby="password-help password-error">
                             <button type="button" class="btn btn-outline-secondary password-display-toggler" aria-label="Afficher/masquer le mot de passe" aria-pressed="false">
                                 <i class="far fa-eye" aria-hidden="true"></i>
                             </button>
                         </div>
                         <div id="password-help" class="form-text" data-i18n="manager.profil.passwordConstraints">Minimum 8 caractères</div>
                         <div id="password-error" class="error-message" aria-live="polite"></div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row mb-4">
                                                 <span>
                             <i class="fa fa-key" aria-hidden="true"></i>
                             <label for="profile-form-confirm-password" class="tutorial-label" data-i18n="[html]manager.profil.confirmPassword">Confirmer le mot de passe <span class="mandatory" aria-label="obligatoire">*</span></label>
                         </span>
                         <div class="input-group px-0">
                             <input type="password" name="confirm-password" id="profile-form-confirm-password" class="form-control form-control-lg" required aria-required="true" aria-describedby="confirm-password-error">
                             <button type="button" class="btn btn-outline-secondary password-display-toggler" aria-label="Afficher/masquer la confirmation du mot de passe" aria-pressed="false">
                                 <i class="far fa-eye" aria-hidden="true"></i>
                             </button>
                         </div>
                         <div id="confirm-password-error" class="error-message" aria-live="polite"></div>
                    </div>
                </div>
            </div>

            <p data-i18n="[html]manager.account.registration.cguVittascience"></p>

                         <fieldset>
                 <legend class="sr-only">Options et confirmations</legend>
                 <div class="c-checkbox">
                     <input class="form-check-input" type="checkbox" id="cb_name_public">
                     <label class="form-check-label" for="cb_name_public"
                         data-i18n="manager.account.registration.accountPublic">Rendre mon profil public
                     </label>
                 </div>
                 <div class="c-checkbox">
                     <input class="form-check-input" type="checkbox" id="cb_newsletter">
                     <label class="form-check-label" for="cb_newsletter" data-i18n="manager.account.registration.newsletter">S'abonner à la newsletter
                     </label>
                 </div>
                 <div class="c-checkbox">
                     <input class="form-check-input" type="checkbox" id="cb_alert_mail">
                     <label class="form-check-label" for="cb_alert_mail" data-i18n="manager.account.registration.mailAlert">Recevoir des alertes par email
                     </label>
                 </div>
                 <div class="c-checkbox">
                     <input class="form-check-input" type="checkbox" id="cb_allow_contact">
                     <label class="form-check-label" for="cb_allow_contact"
                         data-i18n="manager.account.registration.allowContact">Autoriser les contacts
                     </label>
                 </div>
                 <div class="c-checkbox">
                     <input class="form-check-input" type="checkbox" id="cb_adult" required aria-required="true" aria-describedby="adult-error">
                     <label class="form-check-label" for="cb_adult"
                         data-i18n="[html]manager.account.registration.confirmAdult">Je confirme être majeur(e) <span class="mandatory" aria-label="obligatoire">*</span>
                     </label>
                     <div id="adult-error" class="error-message" aria-live="polite"></div>
                 </div>
             </fieldset>

                         <div class="col-md-12 d-flex flex-column align-items-center">
                 <button class="btn c-btn-primary mt-3 btn-lg" type="submit" aria-label="Créer votre compte enseignant">
                     <span data-i18n="classroom.login.signup">Créer le compte</span>
                 </button>
             </div>

         </form>
         <button onclick="navigateLight('login-choice')" class="btn close-login-classroom m-1" type="button" aria-label="Fermer la fenêtre d'inscription" tabindex="0">
             <i class="fas fa-times" aria-hidden="true"></i>
         </button>
    </div>
</div>



  <div id="login-container" class="inner-register-container" style="display:none;position:relative;" role="dialog" aria-labelledby="teacher-login-form-title" aria-modal="true">
     <div class="login-form p-0" id="signupin-div">
                     <h2 id="teacher-login-form-title" class="text-center fs-4 fw-bold c-text-primary" role="heading" aria-level="2">
             <i class="fa fa-sign-in-alt" aria-hidden="true"></i>
             <span data-i18n="login_popup.title" class="mx-2">Connexion enseignant</span>
         </h2>

        <p data-i18n="login_popup.details"></p>
                 <p><a data-i18n="login-page.createAccount" href='#' onclick="displaySignupClass();" aria-label="Créer un compte enseignant">Créer un compte</a></p>
         <div id="info-div-classroom" aria-live="polite" aria-atomic="true"></div>
         <form id="login-form" class="c-primary-form" aria-labelledby="teacher-login-form-title" novalidate>
            <div id="login-div-classroom">
                                 <label for="login-mail-input" class="mt-2">
                     <i class="fa fa-at" aria-hidden="true"></i> 
                     <span data-i18n="login_popup.form.addressmail">Adresse email</span>
                     <span class="mandatory" aria-label="obligatoire">*</span>
                 </label>
                 <input name='mail' style="margin-bottom:5px;"
                     data-i18n="[placeholder]login_popup.form.addressmail_placeholder"
                     class="form-control form-control-lg" type="email" id="login-mail-input"
                     data-testid="classroomLoginEmailInput" required aria-required="true" 
                     autocomplete="email" aria-describedby="login-mail-error">
                 <div id="login-mail-error" class="error-message" aria-live="polite"></div>

                                 <label for="login-pwd-input" class="mt-2">
                     <i class="fa fa-key" aria-hidden="true"></i> 
                     <span data-i18n="login_popup.form.password">Mot de passe</span>
                     <span class="mandatory" aria-label="obligatoire">*</span>
                 </label>
                 <input name='password' data-i18n="[placeholder]login_popup.form.password_placeholder"
                     class="form-control form-control-lg" type="password" id="login-pwd-input"
                     data-testid="classroomLoginPasswordInput" required aria-required="true" 
                     autocomplete="current-password" aria-describedby="login-pwd-error">
                 <div id="login-pwd-error" class="error-message" aria-live="polite"></div>

                                 <div style="display: none;" aria-hidden="true">
                     <input type="text" name="za78e-username" autocomplete="off" value="" id="za78e-username"
                         class="za78e-field" placeholder="za78e username" tabindex="-1">
                     <input type="number" name="za78e-number" autocomplete="off" max="10" min="0" id="za78e-number"
                         class="za78e-field" placeholder="za78e number" tabindex="-1">
                 </div>

                <div class="my-1 d-flex justify-content-end">
                    <a class="hint" href="/classroom/password_manager.php"
                        data-i18n="login_popup.form.forgot_password"></a>
                </div>
            </div>

                         <div class="mt-2 d-none" id="login-totp-div-classroom">
                 <label for="totp_code-login-page">Votre compte est protégé par une authentification à deux facteurs,
                     veuillez entrer le code ci-dessous :</label>
                 <input id="totp_code-login-page" name="totp_code" placeholder="Code Authenticator" 
                     class="form-control" type="text" inputmode="numeric" 
                     aria-describedby="totp-help" required aria-required="true">
                 <div id="totp-help" class="form-text">Saisissez le code à 6 chiffres de votre application d'authentification</div>
             </div>

             <button type='submit' style="margin-top:10px;" onclick="checkLogin();" class="btn c-btn-secondary"
                 id="login-button" data-i18n="login_popup.form.btn_connect"
                 data-testid="classroomLoginSubmitBtn" aria-label="Se connecter avec vos identifiants">
                 <span data-i18n="login_popup.form.btn_connect">Connexion</span>
             </button>
             <button type='button' style="margin-top:10px; display:none;" onclick="getNewValidationMail();"
                 class="btn c-btn-secondary" id="btn-activate-account-classroom"
                 data-i18n="login_popup.form.btn_activate" aria-label="Renvoyer l'e-mail d'activation">
                 <span>Renvoyer l'e-mail d'activation</span>
             </button>
        </form>

                 <button onclick="navigateLight('login-choice')" class="btn close-login-classroom m-1" type="button" aria-label="Fermer la fenêtre de connexion" tabindex="0">
             <i class="fas fa-times" aria-hidden="true"></i>
         </button>
    </div>
</div>

<!-- page de login via un lien -->
 <div id="classroom-login-container-bis" style="display:none;" role="dialog" aria-labelledby="link-login-title" aria-modal="true">
     <div class="inner-login-container">
         <h2 id="link-login-title" class="sr-only" role="heading" aria-level="2">Connexion via lien</h2>
         <p id="classroom-desc"></p>
         <div id="classroom-create-account" class="container-border-left container-border-left-enable" role="region" aria-labelledby="new-user-title">
             <h3 id="new-user-title" class="font-weight-bold c-text-primary" data-i18n="classroom.login.signin" role="heading" aria-level="3">Première connexion</h3>
             <form aria-labelledby="new-user-title">
                 <div class="c-primary-form">
                     <p data-i18n="classroom.login.firstVisit">Première visite ?</p>
                     <img src="assets/media/green_user.png" class="icon-label" alt="" aria-hidden="true">
                     <label for="new-user-pseudo-form" data-i18n="words.username" class="text-capitalize">Nom d'utilisateur <span class="mandatory" aria-label="obligatoire">*</span></label>
                     <input type="text" placeholder="Vitta" name="username" id="new-user-pseudo-form" required aria-required="true" aria-describedby="new-user-error">
                     <div id="new-user-error" class="error-message" aria-live="polite"></div>
                 </div>
                 <button class="btn c-btn-primary" id="create-user" type="submit" aria-label="Créer votre profil utilisateur">
                     <span data-i18n="words.confirm">Confirmer</span> 
                     <i class="fas fa-chevron-right" aria-hidden="true"></i>
                 </button>
             </form>
            <span id="warning-pseudo-used" style="display:none;" data-i18n="classroom.login.error.used"></span>
        </div>
                 <div id="classroom-login-account" class="container-border-right" role="region" aria-labelledby="existing-user-title">
             <h3 id="existing-user-title" class="font-weight-bold c-text-primary" data-i18n="classroom.login.signin" role="heading" aria-level="3">Connexion utilisateur existant</h3>
             <form aria-labelledby="existing-user-title">
                 <div class="c-primary-form">
                     <p data-i18n="classroom.login.hasReturned">Déjà utilisé cette classe ?</p>

                     <img src="assets/media/green_user.png" class="icon-label" alt="" aria-hidden="true">
                     <label for="user-pseudo-form" data-i18n="words.username" class="text-capitalize">Nom d'utilisateur <span class="mandatory" aria-label="obligatoire">*</span></label>
                     <input type="text" placeholder="Vitta" id="user-pseudo-form" name="secret_code" required aria-required="true" aria-describedby="user-pseudo-error">
                     <div id="user-pseudo-error" class="error-message" aria-live="polite"></div>

                     <img src="assets/media/green_lock.png" class="icon-label" alt="" aria-hidden="true">
                     <label for="user-password-form" data-i18n="words.password">Mot de passe <span class="mandatory" aria-label="obligatoire">*</span></label>
                     <input type="password" placeholder="••••••••••" name="password" id="user-password-form"
                         required aria-required="true" aria-describedby="user-password-error">
                     <div id="user-password-error" class="error-message" aria-live="polite"></div>
                     
                     <a href="#" data-i18n="classroom.login.forgot">Mot de passe oublié ?</a>
                     <div class="mt-2 mb-2 alert alert-warning mismatched-login" style="display:none;"
                         data-i18n="classroom.login.error.badInput" role="alert" aria-live="assertive">
                         Identifiants incorrects
                     </div>
                 </div>
                 <button class="btn c-btn-primary" id="connect-nongar-user" type="submit" aria-label="Se connecter avec vos identifiants">
                     <span data-i18n="words.confirm" class="text-capitalize">Confirmer</span> 
                     <i class="fas fa-chevron-right" aria-hidden="true"></i>
                 </button>
             </form>
         </div>
         <button onclick="navigateLight('login-choice')" class="btn close-login-classroom m-1" type="button" aria-label="Fermer la fenêtre de connexion" tabindex="0">
             <i class="fas fa-times" aria-hidden="true"></i>
         </button>
    </div>
</div>

<script>
    /* INTERACTIVE BLOCK */
    $("#fake-blockly-input").on("input", (function () {
        var text = $("#fake-blockly-input").val().trim();
        $('#fake-code-text').text(text);
        $('#fake-display').text(text);
    }));
</script>
<script src="assets/js/lib/popper-1.16.0/popper.min.js">
</script>
<script src="assets/js/lib/bootstrap-5.3.0/bootstrap.min.js">
</script>
<script src="assets/js/lib/i18next.js"></script>
<script src="assets/js/lib/jquery-i18next.min.js"></script>
<script src="assets/js/lib/i18nextXHRBackend.min.js"></script>
<script src="assets/js/lib/i18nextBrowserLanguageDetector.min.js"></script>
<script type="text/javascript" src="assets/js/lib/slick-1.8.1/slick/slick.min.js"></script>
<script src="assets/js/utils/translate.js"></script>
<script src="assets/js/utils/get.js"></script>
<script src="assets/js/scripts/dashboardActivities.js"></script>
<script src="assets/js/scripts/displayPanel.js"></script>
<script src="assets/js/lib/EasyAutocomplete-1.3.5/jquery.easy-autocomplete.min.js"></script>
<script src="assets/js/main/Loader.js"></script>
<script src="assets/js/main/UIManager.js"></script>
<script src="assets/js/main/User.js"></script>
<script src="assets/js/main/ClassroomManager.js"></script>
<script src="assets/js/main/Main.js"></script>
<script src="assets/js/scripts/main-login.js"></script>
<script src="assets/js/utils/registrationTemplate.js"></script>
<script src="assets/js/scripts/buttons.js"></script>
<script src="assets/js/scripts/login.js"></script>
<script>
    UIManager.init().then((resolve) => {
        UserManager.init().then((resolve) => {
            Main.init().then((resolve) => {
                loginFaqNeutral();
                /* FAQ BOXES */
                var headers = document.getElementsByClassName("faq-box-header");
                $(headers).rotate({
                    bind: {
                        click: function () {
                            var drop = $(this).find(".faq-box-dropdown");
                            var content = $(this).parent().find(".faq-box-content");
                            if (drop.hasClass("dropped")) {
                                drop.rotate({
                                    angle: drop.getRotateAngle(),
                                    animateTo: 0
                                });
                                content.fadeOut("slow", function () {
                                    drop.removeClass("dropped");
                                });
                            } else {
                                drop.rotate({
                                    angle: drop.getRotateAngle(),
                                    animateTo: 90
                                });
                                content.fadeIn("slow", function () {
                                    drop.addClass("dropped");
                                });
                            }
                        }
                    }
                });
                if ($_GET('link') && firstRequestClass) {
                    firstRequestClass = false;
                    navigateLight($_GET('link'), 2)
                }
                // Set the variable to false to indicate that the registration template is already set up
                firstRegisterLoad = false;
                // Setup the registration form before displaying it (trigger only on loading page)
                createRegistrationTemplateForLogin();
                // little delay to let the constant file load
                setTimeout(() => {
                    createSubjectSelectTeacherForm(getSubjects(0));
                }, 500);
            })
        },
            (reason) => {
                console.error("UserManager failed to load: " + reason);
                failedToLoad();
            }
        );
    })
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        fetch('/classroom/ajax_sso_buttons.php')
            .then(response => response.text())
            .then(html => {
                if (html.trim() === '') {
                    return;
                }
                const container = document.getElementById('sso-buttons-container');
                if (!container) {
                    return;
                }
                let translationForOr = i18next.t('classroom.login.orSso');
                container.innerHTML += `<hr class="d-flex w-100 themed-hr-login">`;
                container.innerHTML += `<span class="col-12">${translationForOr}</span>`;
                container.innerHTML += '<div class="d-flex flex-column align-items-center mt-2 w-100">' + html + '</div>';
            })
            .catch(error => {
                console.error('Erreur lors du chargement des boutons SSO:', error);
            });
    });
</script>

<script src="assets/js/scripts/passwordVisibility.js"></script>